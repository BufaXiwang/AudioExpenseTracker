# AudioExpenseTracker 设置指南

## 📱 应用概述

AudioExpenseTracker 是一个基于 SwiftUI 开发的智能语音记账应用，主要功能包括：

- 🎤 语音录制和实时转文本
- 🤖 AI 智能分析费用信息
- 💰 自动分类和标记费用
- 📊 费用统计和可视化
- 💾 本地数据存储

## 🛠 开发环境要求

- Xcode 15.0+
- iOS 18.4+
- Swift 5.0+
- 物理设备（语音功能需要真机测试）

## 🔧 项目配置

### 1. API 配置

应用需要配置 Deepseek API 才能使用 AI 分析功能：

#### 方法1：使用配置文件（推荐）

1. 注册 Deepseek 账号并获取 API Key
2. 复制示例配置文件：
   ```bash
   cp AudioExpenseTracker/Config.example.plist AudioExpenseTracker/Config.plist
   ```
3. 编辑 `AudioExpenseTracker/Config.plist` 文件，替换 API Key：
   ```xml
   <key>DEEPSEEK_API_KEY</key>
   <string>sk-your-actual-api-key-here</string>
   ```

#### 方法2：使用 Xcode 环境变量

1. 在 Xcode 中选择 `Product` > `Scheme` > `Edit Scheme...`
2. 选择 `Run` > `Arguments` > `Environment Variables`
3. 添加环境变量：
   - Name: `DEEPSEEK_API_KEY`
   - Value: `sk-your-actual-api-key-here`

#### 方法3：直接在代码中配置（仅开发测试）

临时测试可以直接在 `ConfigManager.swift` 中硬编码 API Key，但不推荐用于生产环境。

### 2. 权限配置

应用已在 `Info.plist` 中配置了必要权限：

- `NSMicrophoneUsageDescription` - 麦克风权限
- `NSSpeechRecognitionUsageDescription` - 语音识别权限

### 3. 构建和运行

1. 使用 Xcode 打开 `AudioExpenseTracker.xcodeproj`
2. 选择目标设备（必须是真机）
3. 构建并运行应用

## 📋 使用流程

### 基本使用步骤

1. **启动应用**
   - 首次启动会请求麦克风和语音识别权限
   - 点击"允许"以启用语音功能

2. **录制语音**
   - 点击蓝色录制按钮开始录音
   - 说出费用信息，例如："今天午餐花了25块钱"
   - 点击红色停止按钮结束录音

3. **AI 分析**
   - 应用会自动将语音转为文字
   - AI 会分析文字内容，提取金额、分类等信息
   - 分析完成后显示确认界面

4. **确认保存**
   - 检查 AI 分析的结果
   - 如需修改，点击"编辑"按钮
   - 点击"保存"完成记录

### 语音输入技巧

为了获得更好的识别效果，建议：

- 🗣 语速适中，发音清晰
- 💰 明确说出金额，如"二十五元"、"25块"
- 🏪 提及消费场所或类型，如"超市"、"午餐"
- 📅 可以说明时间，如"今天"、"昨天"

### 示例语音输入

- ✅ "今天中午在公司楼下吃饭花了三十五块钱"
- ✅ "昨天买菜花了68元"
- ✅ "打车到机场花了120块"
- ✅ "给妈妈买礼物花了二百元"

## 🔍 故障排除

### 常见问题

**1. 语音识别不工作**
- 检查麦克风权限是否已授权
- 确保在安静环境下使用
- 重启应用重新请求权限

**2. AI 分析失败**
- 检查网络连接
- 验证 API Key 是否正确配置
- 查看错误信息获取具体原因

**3. 语音转文字不准确**
- 确保发音清晰
- 避免在嘈杂环境中使用
- 尝试重新录制

**4. 应用崩溃**
- 检查是否在模拟器中运行（语音功能需要真机）
- 查看 Xcode 控制台的错误信息
- 重新构建项目

### 调试技巧

1. **查看语音转文字结果**
   - 在录制完成后检查识别的文字是否正确

2. **测试 AI 分析**
   - 可以手动输入文字测试 AI 分析功能

3. **检查数据存储**
   - 使用 Core Data 调试工具查看存储的数据

## 🚀 进一步开发

### 扩展功能建议

1. **数据可视化**
   - 添加 Swift Charts 显示消费趋势
   - 实现月度/年度报告

2. **云端同步**
   - 集成 CloudKit 实现多设备同步
   - 数据备份和恢复

3. **智能提醒**
   - 基于消费模式的智能提醒
   - 预算管理和超支警告

4. **多语言支持**
   - 支持英文语音识别
   - 本地化用户界面

### 性能优化

1. **语音处理优化**
   - 实现音频压缩
   - 优化语音识别响应时间

2. **AI 分析优化**
   - 实现本地缓存减少 API 调用
   - 批量处理多条记录

3. **用户体验优化**
   - 添加触觉反馈
   - 优化动画效果

## 📞 技术支持

如果遇到问题，可以：

1. 查看项目中的代码注释
2. 检查 TODO.md 了解开发进度
3. 参考 .cursorrules 了解开发规范

---

**注意事项**：
- 此应用仅用于学习和演示目的
- 请妥善保管 API Key，不要在生产环境中硬编码
- 语音识别功能需要网络连接 